import{_ as C}from"./Table.vue_vue_type_script_setup_true_lang-Cba1Vur7.js";import{u as j}from"./index-Ca70tr9Y.js";import{_ as E}from"./StatusOffer.vue_vue_type_script_setup_true_lang-BoBQZIzt.js";import{p as k,c as m,k as N,a as d,o as l,e as t,t as a,b as f,F as p,h as x,q as g}from"./app-Buh98poO.js";const D={class:"w-full"},$={class:"w-full mx-auto bg-white rounded-2xl"},L={class:"text-2xl font-bold text-gray-800 mb-4"},R={class:"grid grid-cols-2 gap-2"},V={class:"w-full border border-gray-100 p-4 rounded-md"},A={class:"grid grid-cols-2 gap-6 text-sm"},F={class:"font-medium"},B={class:"font-medium capitalize"},O={class:"font-medium"},P={class:"font-medium"},T={class:"w-full border border-gray-100 p-4 rounded-md"},K={class:"grid grid-cols-2 gap-6 text-sm"},M={class:"font-medium"},S={class:"font-medium"},q={class:"font-medium"},z={class:"font-medium"},I={class:"font-medium"},Z={class:"font-medium"},G={class:"max-w-max mt-5"},H={key:0,class:"space-y-2"},J={class:"truncate max-w-xs"},Q=["href"],U={key:1,class:"text-gray-500"},W={class:"w-full mt-6"},X={class:"flex py-4 justify-between items-center w-full"},Y={class:"flex gap-2 justify-between items-center"},tt=["disabled"],et={class:"w-full bg-white"},st={class:"flex flex-col gap-2"},at=["href","download"],it=["href"],ut=k({__name:"OffreManagerDetail",props:{data:Array},setup(s){const u=s,{exportToExcel:y,downloadZip:b}=j(),v={candidat:"Candidate",user_email:"Email",user_phone:"Phone",origin_nationality:"Nationality",second_nationality:"nationality_2",origin_country:"Country of residence",origin_city:"City duty station",origin_experience_years:"Experience",origin_french_level:"French Level",origin_english_level:"English Level",date:"Application date"};m(()=>u.data.data[0]);const h=["uuid"],r=N({loading:!1,label:"Export CV"}),c=m(()=>!u.data?.data||u.data.data.length===0?[]:Object.keys(u.data.data[0]?.candidat[0]||{}).filter(e=>!h.includes(e)).map(e=>({key:e,label:v[e]||e}))),_=(o,e)=>{delete o[o.findIndex(i=>i.key==="documents")],y(o,e,"Liste_des_candidatures.xlsx")},w=async o=>{let e=[];o.forEach(i=>{const n=i.documents[0];n&&e.push(n)}),e.length>0?(r.loading=!0,r.label="Chargement...",await b(e),r.loading=!1,r.label="Export CV"):alert("Aucun document trouvÃ©")};return(o,e)=>(l(),d("div",null,[t("div",D,[t("div",$,[e[15]||(e[15]=t("div",{class:"flex justify-between items-center"},[t("div",{class:"flex items-center gap-2 mb-3"})],-1)),t("h1",L," Recruitment Offer: "+a(s.data?.data[0]?.job.position_title),1),t("div",R,[t("div",V,[t("div",A,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-gray-500"},"Reference",-1)),t("p",F,a(s.data?.data[0]?.reference),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-gray-500"},"Type",-1)),t("p",B,a(s.data?.data[0]?.type),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-gray-500"},"Status",-1)),f(E,{status:s.data?.data[0]?.status},null,8,["status"])]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-gray-500"},"Published on",-1)),t("p",O,a(s.data?.data[0]?.published_at),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-gray-500"},"Expires on",-1)),t("p",P,a(s.data?.data[0]?.expires_at),1)])])]),t("div",T,[t("div",K,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-gray-500"},"Position Title",-1)),t("p",M,a(s.data?.data[0]?.job.position_title),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-gray-500"},"Duty Country",-1)),t("p",S,a(s.data?.data[0]?.job.country_duty_station),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-gray-500"},"Reason",-1)),t("p",q,a(s.data?.data[0]?.job.reason??"Not specified"),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-gray-500"},"Center",-1)),t("p",z,a(s.data.data[0]?.job?.center??"Not specified"),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-500"},"Recruiter",-1)),t("p",I,a(s.data?.data[0]?.job.assign_by??"Not specified"),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-gray-500"},"reason_replacement",-1)),t("p",Z,a(s.data?.data[0]?.job.reason_replacement??"Not specified"),1)])])])]),t("div",G,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-4"},"Documents",-1)),s.data.data[0].files.length>0?(l(),d("div",H,[(l(!0),d(p,null,x(s.data.data[0].files,(i,n)=>(l(),d("div",{key:n,class:"flex items-center justify-between p-3 border rounded hover:bg-gray-50"},[t("span",J,a(i.name),1),t("a",{href:`${i.url}`,download:"",class:"text-blue-600 hover:underline flex items-center space-x-1"},[...e[13]||(e[13]=[t("i",{class:"uil uil-export"},null,-1),t("span",null,"Download",-1)])],8,Q)]))),128))])):(l(),d("div",U,"No documents available."))])]),t("div",W,[t("div",X,[e[18]||(e[18]=t("h2",{class:"text-2xl font-semibold mb-4"},"List of candidates",-1)),t("div",Y,[t("button",{onClick:e[0]||(e[0]=i=>_(c.value,s.data?.data[0]?.candidat)),type:"button",class:"bg-primary p-2 px-3 rounded-lg text-white cursor-pointer hover:bg-primary-700 transition"},[...e[16]||(e[16]=[t("i",{class:"uil uil-export"},null,-1),t("span",null,"Export List",-1)])]),t("button",{disabled:r.loading,onClick:e[1]||(e[1]=i=>w(s.data?.data[0]?.candidat)),type:"button",class:"bg-gray-50 border border-gray-200 disabled:opacity-50 p-2 px-3 rounded-lg text-primary cursor-pointer hover:bg-gray-100 transition"},[e[17]||(e[17]=t("i",{class:"uil uil-export"},null,-1)),t("span",null,a(r.label),1)],8,tt)])]),t("div",et,[f(C,{columns:c.value,rows:s.data?.data[0]?.candidat},{documents:g(({row:i})=>[t("div",st,[(l(!0),d(p,null,x(i.documents,(n,nt)=>(l(),d("a",{href:`${n.path}`,download:n.name,target:"_blank",class:"text-blue-600 hover:underline"},a(n.name),9,at))),256))])]),actions:g(({row:i})=>[t("a",{href:`/manager/candidat/${i.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," Voir ",8,it)]),_:1},8,["columns","rows"])])])])]))}});export{ut as _};
