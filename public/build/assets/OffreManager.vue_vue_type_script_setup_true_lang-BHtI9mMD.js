import{u as g}from"./index-CuRTyU2X.js";import{_ as x}from"./AddOffre.vue_vue_type_style_index_0_lang-DBp98hdP.js";import{_ as k}from"./Table.vue_vue_type_script_setup_true_lang-BLbu57cG.js";import v from"./UpdateOffre-1MOkRre3.js";import{_ as h}from"./StatusOngoing.vue_vue_type_script_setup_true_lang-Dan3rNcY.js";import{_ as w}from"./StatusOffer.vue_vue_type_script_setup_true_lang-Cd33q9lA.js";import j from"./Spinnercomponent-Btc9HR0K.js";import{p as $,r as i,a as p,o as u,e as o,b as a,u as C,q as c,g as E}from"./app-DsXdfWFG.js";const R={class:"w-full"},O={class:"flex justify-between items-center w-full"},B={class:"flex justify-between items-center"},T={class:"w-full"},M={class:"w-ful"},N={class:"flex items-center gap-2"},V=["onClick"],q={key:1},A=["href"],P=["href"],H=$({__name:"OffreManager",props:{data:Array},setup(n){const d=[{key:"reference",label:"# Ref"},{key:"assign_by",label:"Recruiter"},{key:"type",label:"Type"},{key:"manager",label:"Manager"},{key:"center",label:"Recruitment Entity"},{key:"position_title",label:"Position"},{key:"status",label:"Status"},{key:"ongoing",label:"Ongoing status"},{key:"reason",label:"Reason"},{key:"published_at",label:"Published on"},{key:"expires_at",label:"Expires on"},{key:"candidates_count",label:"Number of candidates"}],{exportToExcel:m}=g(),r=i(null),l=i(!1),f=i(null),_=()=>{r.value=!1},b=e=>{r.value={uuid:e.uuid??null,reference:e.reference??null,position_title:e.job?.position_title??"",country_duty_station:e.job.country_duty_station??"france",published_at:e.published_at??"",type:e.type??"public",expires_at:e.expires_at??"",assign_by:e.job.assign_by??"",reason:e.job.reason??"",manager:e.job.manager??"",center:e.job.center??"",status:e.status??"",reason_replacement:e.job.reason_replacement??""}},y=async e=>{try{f.value=e?.uuid,l.value=!0;const s=await axios.get(`/manager/offre/detail/${e?.uuid}`);b(s.data.data),l.value=!1}catch(s){let t=s.response?.data?.message?s.response?.data?.message:"Erreur lors de l'envoi du formulaire ❌";s.response&&s.response.data&&s.response.data.errors&&(t=Object.values(s.response.data.errors).flat().join(`
`)),alert(t)}finally{console.log("Requête terminée")}};return(e,s)=>(u(),p("div",null,[o("div",R,[o("div",O,[s[2]||(s[2]=o("h2",{class:"text-2xl font-semibold mb-4"},"Manage Job Offers",-1)),o("div",B,[a(x,{data:n.data},null,8,["data"]),o("button",{type:"button",onClick:s[0]||(s[0]=t=>C(m)(d,n.data.offer,"Liste_des_offres.xlsx")),class:"bg-primary p-2 px-3 rounded-lg text-white cursor-pointer"},[...s[1]||(s[1]=[o("i",{class:"uil uil-export"},null,-1),o("span",null,"Export",-1)])])])]),o("div",T,[o("div",M,[a(k,{columns:d,rows:n.data?.offer},{ongoing:c(({row:t})=>[a(h,{status:t.ongoing},null,8,["status"])]),status:c(({row:t})=>[a(w,{status:t?.status},null,8,["status"])]),actions:c(({row:t})=>[o("div",N,[o("button",{onClick:S=>y(t),type:"button",class:"px-3 cursor-pointer py-1 text-sm border rounded-md hover:bg-gray-50"},[l.value&&f.value==t.uuid?(u(),E(j,{key:0})):(u(),p("span",q,"Edit"))],8,V),o("a",{href:`/manager/offres/${t.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," View ",8,A),o("a",{href:`/manager/offerTracker/${t.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," Tracking ",8,P)])]),_:1},8,["rows"])]),a(v,{row:r.value,assign:n.data.assign,onClose:_},null,8,["row","assign"])])])]))}});export{H as _};
