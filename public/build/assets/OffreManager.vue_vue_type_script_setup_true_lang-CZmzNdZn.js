import{p as w,r as n,R as j,a as f,o as p,e as s,w as C,b as a,y as $,u as E,q as l,h as R,t as T}from"./app-DE-L0Fm-.js";import{u as D}from"./index-Dknkoxjo.js";import{_ as S}from"./AddOffre.vue_vue_type_style_index_0_lang-B2rQKhd-.js";import{_ as B}from"./Table.vue_vue_type_script_setup_true_lang-CafkduMV.js";import M from"./UpdateOffre-CJGZQCBh.js";import{_ as I}from"./StatusOngoing.vue_vue_type_script_setup_true_lang-Pj_e6qM7.js";import{_ as O}from"./StatusOffer.vue_vue_type_script_setup_true_lang-DpmAx8qE.js";import V from"./Spinnercomponent-CKBwAh96.js";import{d as b}from"./index-DKX-0dvV.js";const N={class:"w-full min-h-screen flex flex-col"},P={class:"flex justify-between mb-6 items-center w-full"},U={class:"flex gap-2 justify-between items-center"},q={class:"pb-10 overflow-x-auto"},A={class:"w-ful"},F={class:"max-w-max p-0.4 px-1 min-w-6 rounded-full text-center font-bold leading-4 bg-green-200"},G={class:"flex items-center gap-2"},J=["onClick"],L={key:1},z=["href"],H=["href"],oe=w({__name:"OffreManager",props:{data:Array},setup(o){const g=o,m=[{key:"reference",label:"# Ref"},{key:"assign_by",label:"Recruiter"},{key:"type",label:"Type"},{key:"manager",label:"Manager"},{key:"center",label:"Recruitment Entity"},{key:"position_title",label:"Position"},{key:"country_duty_station",label:"Country duty station"},{key:"city_duty_station",label:"City duty station"},{key:"division",label:"Division"},{key:"grade",label:"Grade"},{key:"program",label:"Program"},{key:"status",label:"Status"},{key:"ongoing",label:"Ongoing status"},{key:"comment",label:"Comment tacking"},{key:"date_tracking",label:"Date tracking"},{key:"reason",label:"Reason"},{key:"reason_replacement",label:"Replacement fullname"},{key:"published_at",label:"Published on"},{key:"expires_at",label:"Expires on"},{key:"candidates_count",label:"Number of candidates"}],{exportToExcel:_}=D(),i=n(null),u=n(!1),y=n(null),c=n(g.search||null);let d=null;const x=()=>{i.value=!1},v=e=>{i.value={uuid:e.uuid??null,reference:e.reference??null,position_title:e.job?.position_title??"",country_duty_station:e.job.country_duty_station??"france",published_at:e.published_at??"",type:e.type??"public",expires_at:e.expires_at??"",status:e.status??"",assign_by:e.job.assign_by??"",reason:e.job.reason??"",manager:e.job.manager??"",center:e.job.center??"",grade:e.job.grade??"",program:e.job.program??"",division:e.job.division??"",city_duty_station:e.job.city_duty_station??"",reason_replacement:e.job.reason_replacement??""}};function k(){d&&clearTimeout(d),d=setTimeout(()=>{b.Inertia.get("/manager/offres",{search:c.value},{preserveState:!0,replace:!0})},300)}const h=async e=>{try{y.value=e?.uuid,u.value=!0;const t=await axios.get(`/manager/offre/detail/${e?.uuid}`);v(t.data.data),u.value=!1}catch(t){let r=t.response?.data?.message?t.response?.data?.message:"Erreur lors de l'envoi du formulaire ❌";t.response&&t.response.data&&t.response.data.errors&&(r=Object.values(t.response.data.errors).flat().join(`
`)),alert(r)}finally{console.log("Requête terminée")}};return j(()=>{b.Inertia.reload({only:["data"],preserveScroll:!0,preserveState:!0})}),(e,t)=>(p(),f("div",null,[s("div",N,[s("div",P,[t[3]||(t[3]=s("h2",{class:"text-2xl font-semibold"},"Manage Job ",-1)),s("div",U,[C(s("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),onInput:k,type:"search",placeholder:"search...",class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},null,544),[[$,c.value]]),s("button",{type:"button",onClick:t[1]||(t[1]=r=>E(_)(m,o.data.offer,"Liste_des_offres.xlsx")),class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},[...t[2]||(t[2]=[s("i",{class:"uil uil-export"},null,-1),s("span",null,"Export",-1)])]),a(S,{data:o.data},null,8,["data"])])]),s("div",q,[s("div",A,[a(B,{columns:m,rows:o.data?.offer},{ongoing:l(({row:r})=>[a(I,{status:r.ongoing},null,8,["status"])]),candidates_count:l(({row:r})=>[s("div",F,T(r.candidates_count),1)]),status:l(({row:r})=>[a(O,{status:r?.status},null,8,["status"])]),actions:l(({row:r})=>[s("div",G,[s("button",{onClick:K=>h(r),type:"button",class:"border-[0.1rem] border-gray-200 px-3 rounded-lg text-primary py-1 text-[12px] cursor-pointer pyrder hover:bg-gray-50"},[u.value&&y.value==r.uuid?(p(),R(V,{key:0})):(p(),f("span",L,"Edit"))],8,J),s("a",{href:`/manager/offres/${r.uuid}`,class:"border-[0.1rem] border-gray-200 px-3 rounded-lg text-primary py-1 text-[12px] hover:bg-gray-50"}," View ",8,z),s("a",{href:`/manager/offerTracker/${r.uuid}`,class:"border-[0.1rem] border-gray-200 px-3 rounded-lg text-primary py-1 text-[12px] hover:bg-gray-50"}," Tracking ",8,H)])]),_:1},8,["rows"])]),a(M,{row:i.value,assign:o.data.assign,onClose:x},null,8,["row","assign"])])])]))}});export{oe as _};
