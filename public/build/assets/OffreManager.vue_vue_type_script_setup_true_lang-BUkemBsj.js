import{p as w,r as n,R as j,z as y,a as b,o as d,e as o,w as C,b as a,y as $,u as E,q as p,g as R}from"./app-BirxOUqQ.js";import{u as T}from"./index-BXiCLzn4.js";import{_ as B}from"./AddOffre.vue_vue_type_style_index_0_lang-DPAmAvD8.js";import{_ as D}from"./Table.vue_vue_type_script_setup_true_lang-Bd6ogAfS.js";import M from"./UpdateOffre-DwtB6iY4.js";import{_ as O}from"./StatusOngoing.vue_vue_type_script_setup_true_lang-w1WGlJRE.js";import{_ as S}from"./StatusOffer.vue_vue_type_script_setup_true_lang-CO-BreEe.js";import I from"./Spinnercomponent-BuSdGZUE.js";const V={class:"w-full min-h-screen flex flex-col"},N={class:"flex justify-between mb-6 items-center w-full"},P={class:"flex gap-2 justify-between items-center"},U={class:"pb-10 overflow-x-auto"},q={class:"w-ful"},A={class:"flex items-center gap-2"},z=["onClick"],F={key:1},G=["href"],J=["href"],te=w({__name:"OffreManager",props:{data:Array},setup(r){const g=r,m=[{key:"reference",label:"# Ref"},{key:"assign_by",label:"Recruiter"},{key:"type",label:"Type"},{key:"manager",label:"Manager"},{key:"center",label:"Recruitment Entity"},{key:"position_title",label:"Position"},{key:"country_duty_station",label:"Country duty station"},{key:"city_duty_station",label:"City duty station"},{key:"division",label:"Division"},{key:"grade",label:"Grade"},{key:"program",label:"Program"},{key:"status",label:"Status"},{key:"ongoing",label:"Ongoing status"},{key:"comment",label:"Comment tacking"},{key:"date_tracking",label:"Date tracking"},{key:"reason",label:"Reason"},{key:"reason_replacement",label:"Replacement fullname"},{key:"published_at",label:"Published on"},{key:"expires_at",label:"Expires on"},{key:"candidates_count",label:"Number of candidates"}],{exportToExcel:_}=T(),l=n(null),i=n(!1),f=n(null),u=n(g.search||null);let c=null;const v=()=>{l.value=!1},x=e=>{l.value={uuid:e.uuid??null,reference:e.reference??null,position_title:e.job?.position_title??"",country_duty_station:e.job.country_duty_station??"france",published_at:e.published_at??"",type:e.type??"public",expires_at:e.expires_at??"",status:e.status??"",assign_by:e.job.assign_by??"",reason:e.job.reason??"",manager:e.job.manager??"",center:e.job.center??"",grade:e.job.grade??"",program:e.job.program??"",division:e.job.division??"",city_duty_station:e.job.city_duty_station??"",reason_replacement:e.job.reason_replacement??""}};function k(){c&&clearTimeout(c),c=setTimeout(()=>{y.Inertia.get("/manager/offres",{search:u.value},{preserveState:!0,replace:!0})},300)}const h=async e=>{try{f.value=e?.uuid,i.value=!0;const t=await axios.get(`/manager/offre/detail/${e?.uuid}`);x(t.data.data),i.value=!1}catch(t){let s=t.response?.data?.message?t.response?.data?.message:"Erreur lors de l'envoi du formulaire ❌";t.response&&t.response.data&&t.response.data.errors&&(s=Object.values(t.response.data.errors).flat().join(`
`)),alert(s)}finally{console.log("Requête terminée")}};return j(()=>{y.Inertia.reload({only:["data"],preserveScroll:!0,preserveState:!0})}),(e,t)=>(d(),b("div",null,[o("div",V,[o("div",N,[t[3]||(t[3]=o("h2",{class:"text-2xl font-semibold"},"Manage Job Offers",-1)),o("div",P,[C(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onInput:k,type:"search",placeholder:"search...",class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},null,544),[[$,u.value]]),o("button",{type:"button",onClick:t[1]||(t[1]=s=>E(_)(m,r.data.offer,"Liste_des_offres.xlsx")),class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},[...t[2]||(t[2]=[o("i",{class:"uil uil-export"},null,-1),o("span",null,"Export",-1)])]),a(B,{data:r.data},null,8,["data"])])]),o("div",U,[o("div",q,[a(D,{columns:m,rows:r.data?.offer},{ongoing:p(({row:s})=>[a(O,{status:s.ongoing},null,8,["status"])]),status:p(({row:s})=>[a(S,{status:s?.status},null,8,["status"])]),actions:p(({row:s})=>[o("div",A,[o("button",{onClick:L=>h(s),type:"button",class:"px-3 cursor-pointer py-1 text-sm border rounded-md hover:bg-gray-50"},[i.value&&f.value==s.uuid?(d(),R(I,{key:0})):(d(),b("span",F,"Edit"))],8,z),o("a",{href:`/manager/offres/${s.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," View ",8,G),o("a",{href:`/manager/offerTracker/${s.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," Tracking ",8,J)])]),_:1},8,["rows"])]),a(M,{row:l.value,assign:r.data.assign,onClose:v},null,8,["row","assign"])])])]))}});export{te as _};
