import{_ as V}from"./Table.vue_vue_type_script_setup_true_lang-CgzLKknv.js";import{u as D}from"./index-i8U_YVgn.js";import{_ as $}from"./ButtonBack.vue_vue_type_script_setup_true_lang-EwA9llT9.js";import{l as A,A as y,i as B,B as O,c as i,o as d,b as t,a as c,m as x,d as f,n as g,u as v,t as a,F as h,f as w}from"./app-DMrCKN66.js";const T={class:"w-full"},P={class:"w-full mx-auto bg-white rounded-2xl px-6"},R={class:"flex justify-between items-center py-4"},F={class:"flex items-center gap-2"},L={key:0},z={key:1},K={key:0},M={key:1},S={class:"text-2xl font-bold text-gray-800 mb-4"},G={class:"grid grid-cols-2 gap-6 text-sm"},I={class:"font-medium"},Z={class:"font-medium capitalize"},q={class:"font-medium"},H={class:"font-medium"},J={class:"font-medium"},Q={class:"font-medium"},U={class:"grid grid-cols-2 gap-6 text-sm"},W={class:"font-medium"},X={class:"font-medium"},Y={class:"font-medium"},tt={class:"font-medium"},et={class:"font-medium"},st={class:"max-w-max mt-5"},at={key:0,class:"space-y-2"},lt={class:"truncate max-w-xs"},it=["href"],dt={key:1,class:"text-gray-500"},nt={class:"w-full mt-6"},ot={class:"flex px-6 py-4 justify-between items-center w-full"},rt={class:"flex gap-2 justify-between items-center"},ut=["disabled"],mt={class:"overflow-x-auto border border-slate-200 bg-white"},ct={class:"flex flex-col gap-2"},xt=["href","download"],ft=["href"],ht=A({__name:"OffreManagerDetail",props:{data:Array},setup(s){const m=s,{exportToExcel:_,updateOffres:p,downloadZip:k}=D(),C={candidat:"Candidat",user_email:"Email",user_phone:"Téléphone",origin_nationality:"Nationalité",origin_country:"Pays",origin_city:"Ville",origin_experience_years:"Expérience",origin_french_level:"Niveau français",origin_english_level:"Niveau Anglais"};y(()=>m.data.data[0]);const j=["uuid"],o=B({loading:!1,label:" Export CV"}),b=y(()=>!m.data?.data||m.data.data.length===0?[]:Object.keys(m.data.data[0]?.candidat[0]||{}).filter(e=>!j.includes(e)).map(e=>({key:e,label:C[e]||e}))),N=(n,e)=>{delete n[n.findIndex(r=>r.key==="documents")],_(n,e,"Liste_des_candidatures.xlsx")},E=async n=>{let e=[];n.forEach(r=>{const l=r.documents[0];l&&e.push(l)}),e.length>0?(o.loading=!0,o.label="Chargement...",await k(e),o.loading=!1,o.label="Export CV"):alert("Aucun document trouvé")};return(n,e)=>{const r=O("Button");return d(),i("div",null,[t("div",T,[t("div",P,[t("div",R,[c($,{path:"/manager/offres"}),t("div",F,[c(r,{onClick:e[0]||(e[0]=()=>v(p)(s.data?.data[0]?.is_published?0:1,s.data?.data[0]?.uuid,"is_published")),type:"button",class:g(["max-w-xs text-[12px] px-4 py-2 cursor-pointer font-medium rounded-lg hover:shadow inline-flex items-center gap-2 mb-3",s.data?.data[0]?.is_published?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},{default:x(()=>[s.data?.data[0]?.is_published?(d(),i("span",L,[...e[4]||(e[4]=[t("i",{class:"uil uil-eye"},null,-1),f(" Dépublier l’offre ",-1)])])):(d(),i("span",z,[...e[5]||(e[5]=[t("i",{class:"uil uil-eye-slash"},null,-1),f(" Publier l’offre ",-1)])]))]),_:1},8,["class"]),c(r,{onClick:e[1]||(e[1]=()=>v(p)(s.data?.data[0]?.is_closed?0:1,s.data?.data[0]?.uuid,"is_closed")),type:"button",class:g(["max-w-xs text-[12px] px-4 py-2 cursor-pointer font-medium rounded-lg hover:shadow inline-flex items-center gap-2 mb-3",s.data?.data[0]?.is_closed?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"])},{default:x(()=>[s.data?.data[0]?.is_closed?(d(),i("span",K,[...e[6]||(e[6]=[t("i",{class:"uil uil-check-circle"},null,-1),f(" Réouvrir l’offre ",-1)])])):(d(),i("span",M,[...e[7]||(e[7]=[t("i",{class:"uil uil-times-circle"},null,-1),f(" Fermer l’offre ",-1)])]))]),_:1},8,["class"])])]),t("h1",S," Offre de Recrutement : "+a(s.data?.data[0]?.job.position_title),1),t("div",G,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-gray-500"},"Référence",-1)),t("p",I,a(s.data?.data[0]?.reference),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-gray-500"},"Type",-1)),t("p",Z,a(s.data?.data[0]?.type),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-gray-500"},"Publié ?",-1)),t("p",q,[t("span",{class:g(["px-2 py-1 rounded-full text-xs font-semibold",s.data?.data[0]?.is_published?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},a(s.data?.data[0]?.is_published?"Oui":"Non"),3)])]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-500"},"Clôturé ?",-1)),t("p",H,[t("span",{class:g(["px-2 py-1 rounded-full text-xs font-semibold",s.data?.data[0]?.is_closed?"bg-red-100 text-red-700":"bg-green-100 text-green-700"])},a(s.data?.data[0]?.is_closed?"Oui":"Non"),3)])]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-gray-500"},"Publié le",-1)),t("p",J,a(s.data?.data[0]?.published_at),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-gray-500"},"Expire le",-1)),t("p",Q,a(s.data?.data[0]?.expires_at),1)])]),e[21]||(e[21]=t("h2",{class:"text-xl font-semibold text-gray-800 mt-8 mb-4"},"Détails du poste",-1)),t("div",U,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-gray-500"},"Titre du poste",-1)),t("p",W,a(s.data?.data[0]?.job.position_title),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-gray-500"},"Pays d’affectation",-1)),t("p",X,a(s.data?.data[0]?.job.country_duty_station),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-gray-500"},"Ville",-1)),t("p",Y,a(s.data?.data[0]?.job.city_duty_station??"Non précisé"),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-gray-500"},"Grade",-1)),t("p",tt,a(s.data?.data[0]?.job.grade??"Non précisé"),1)]),t("div",null,[e[18]||(e[18]=t("p",{class:"text-gray-500"},"Salaire",-1)),t("p",et,a(s.data?.data[0]?.job.salary_post??"Non précisé"),1)])]),t("div",st,[e[20]||(e[20]=t("h2",{class:"text-lg font-semibold mb-4"},"Documents",-1)),s.data.data[0].files.length>0?(d(),i("div",at,[(d(!0),i(h,null,w(s.data.data[0].files,(l,u)=>(d(),i("div",{key:u,class:"flex items-center justify-between p-3 border rounded hover:bg-gray-50"},[t("span",lt,a(l.name),1),t("a",{href:`/${l.url}`,download:"",class:"text-blue-600 hover:underline flex items-center space-x-1"},[...e[19]||(e[19]=[t("i",{class:"uil uil-export"},null,-1),t("span",null,"Télécharger",-1)])],8,it)]))),128))])):(d(),i("div",dt,"Aucun document disponible."))])]),t("div",nt,[t("div",ot,[e[24]||(e[24]=t("h2",{class:"text-2xl font-semibold mb-4"},"Liste des candidats",-1)),t("div",rt,[t("button",{onClick:e[2]||(e[2]=l=>N(b.value,s.data?.data[0]?.candidat)),type:"button",class:"bg-primary p-2 px-3 rounded-lg text-white cursor-pointer"},[...e[22]||(e[22]=[t("i",{class:"uil uil-export"},null,-1),t("span",null," Export list",-1)])]),t("button",{disabled:o.loading,onClick:e[3]||(e[3]=l=>E(s.data?.data[0]?.candidat)),type:"button",class:"bg-gray-50 border border-gray-200 disabled:opacity-50 p-2 px-3 rounded-lg text-primary cursor-pointer"},[e[23]||(e[23]=t("i",{class:"uil uil-export"},null,-1)),t("span",null,a(o.label),1)],8,ut)])]),t("div",mt,[c(V,{columns:b.value,rows:s.data?.data[0]?.candidat},{documents:x(({row:l})=>[t("div",ct,[(d(!0),i(h,null,w(l.documents,(u,gt)=>(d(),i("a",{href:`${u.path}`,download:u.name,target:"_blank",class:"text-blue-600 hover:underline"},a(u.name),9,xt))),256))])]),actions:x(({row:l})=>[t("a",{href:`/manager/candidat/${l.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," Voir ",8,ft)]),_:1},8,["columns","rows"])])])])])}}});export{ht as _};
