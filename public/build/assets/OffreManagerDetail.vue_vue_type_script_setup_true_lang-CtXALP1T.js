import{_ as j}from"./Table.vue_vue_type_script_setup_true_lang-BQtK7Om6.js";import{u as C}from"./index-B4LonY07.js";import{_ as E}from"./StatusOffer.vue_vue_type_script_setup_true_lang-YiE-Y2aX.js";import{p as k,c,k as D,a as o,o as l,e as t,t as e,b as f,F as g,i as p,q as x}from"./app-DdKep4Ue.js";const N={class:"w-full"},R={class:"w-full mx-auto bg-white rounded-2xl"},$={class:"text-2xl font-bold text-gray-800 mb-4"},L={class:"grid grid-cols-2 gap-2"},V={class:"w-full border border-gray-100 p-4 rounded-md"},A={class:"grid grid-cols-2 gap-6 text-sm"},F={class:"font-medium"},P={class:"font-medium"},B={class:"font-medium"},M={class:"font-medium"},O={class:"font-medium"},T={class:"font-medium"},K={class:"font-medium"},S={class:"font-medium"},q={class:"font-medium"},z={class:"w-full border border-gray-100 p-4 rounded-md"},G={class:"grid grid-cols-2 gap-6 text-sm"},I={class:"font-medium"},Z={class:"font-medium"},H={class:"font-medium"},J={class:"font-medium capitalize"},Q={class:"font-medium"},U={class:"font-medium"},W={class:"max-w-max mt-5"},X={key:0,class:"space-y-2"},Y={class:"truncate max-w-xs"},tt=["href"],st={key:1,class:"text-gray-500"},at={class:"w-full mt-6"},et={class:"flex py-4 justify-between items-center w-full"},it={class:"flex gap-2 justify-between items-center"},dt=["disabled"],nt={class:"w-full overflow-x-auto pb-10 bg-white"},ot={class:"flex flex-col gap-2"},lt=["href","download"],rt=["href"],pt=k({__name:"OffreManagerDetail",props:{data:Array},setup(a){const u=a,{exportToExcel:y,downloadZip:b}=C(),v={candidat:"Candidate",user_email:"Email",user_phone:"Phone",origin_nationality:"Nationality",second_nationality:"nationality_2",origin_country:"Country of residence",origin_city:"City duty station",origin_experience_years:"Experience",origin_french_level:"French Level",origin_english_level:"English Level",date_application:"Application date"};c(()=>u.data.data[0]);const w=["uuid"],r=D({loading:!1,label:"Export CV"}),m=c(()=>!u.data?.data||u.data.data.length===0?[]:Object.keys(u.data.data[0]?.candidat[0]||{}).filter(s=>!w.includes(s)).map(s=>({key:s,label:v[s]||s}))),h=(n,s)=>{delete n[n.findIndex(i=>i.key==="documents")],y(n,s,"Liste_des_candidatures.xlsx")},_=async n=>{let s=[];n.forEach(i=>{const d=i.documents[0];d&&s.push(d)}),s.length>0?(r.loading=!0,r.label="Chargement...",await b(s),r.loading=!1,r.label="Export CV"):alert("Aucun document trouvÃ©")};return(n,s)=>(l(),o("div",null,[t("div",N,[t("div",R,[s[20]||(s[20]=t("div",{class:"flex justify-between items-center"},[t("div",{class:"flex items-center gap-2 mb-3"})],-1)),t("h1",$," Recruitment Offer: "+e(a.data?.data[0]?.job.position_title),1),t("div",L,[t("div",V,[t("div",A,[t("div",null,[s[2]||(s[2]=t("p",{class:"text-gray-500"},"Position Title",-1)),t("p",F,e(a.data?.data[0]?.job.position_title),1)]),t("div",null,[s[3]||(s[3]=t("p",{class:"text-gray-500"},"Duty Country",-1)),t("p",P,e(a.data?.data[0]?.job.country_duty_station),1)]),t("div",null,[s[4]||(s[4]=t("p",{class:"text-gray-500"},"Duty City",-1)),t("p",B,e(a.data?.data[0]?.job.city_duty_station),1)]),t("div",null,[s[5]||(s[5]=t("p",{class:"text-gray-500"},"Grade",-1)),t("p",M,e(a.data?.data[0]?.job.grade),1)]),t("div",null,[s[6]||(s[6]=t("p",{class:"text-gray-500"},"Division",-1)),t("p",O,e(a.data?.data[0]?.job.division),1)]),t("div",null,[s[7]||(s[7]=t("p",{class:"text-gray-500"},"Program",-1)),t("p",T,e(a.data?.data[0]?.job.program),1)]),t("div",null,[s[8]||(s[8]=t("p",{class:"text-gray-500"},"Reason",-1)),t("p",K,e(a.data?.data[0]?.job.reason??"Not specified"),1)]),t("div",null,[s[9]||(s[9]=t("p",{class:"text-gray-500"},"Replacement fullname",-1)),t("p",S,e(a.data?.data[0]?.job.reason_replacement??"Not specified"),1)]),t("div",null,[s[10]||(s[10]=t("p",{class:"text-gray-500"},"Center",-1)),t("p",q,e(a.data.data[0]?.job?.center??"Not specified"),1)])])]),t("div",z,[t("div",G,[t("div",null,[s[11]||(s[11]=t("p",{class:"text-gray-500"},"Recruiter",-1)),t("p",I,e(a.data?.data[0]?.job.assign_by??"Not specified"),1)]),t("div",null,[s[12]||(s[12]=t("p",{class:"text-gray-500"},"Manager",-1)),t("p",Z,e(a.data?.data[0]?.job.manager??"Not specified"),1)]),t("div",null,[s[13]||(s[13]=t("p",{class:"text-gray-500"},"Reference",-1)),t("p",H,e(a.data?.data[0]?.reference),1)]),t("div",null,[s[14]||(s[14]=t("p",{class:"text-gray-500"},"Type",-1)),t("p",J,e(a.data?.data[0]?.type),1)]),t("div",null,[s[15]||(s[15]=t("p",{class:"text-gray-500"},"Status",-1)),f(E,{status:a.data?.data[0]?.status},null,8,["status"])]),t("div",null,[s[16]||(s[16]=t("p",{class:"text-gray-500"},"Published on",-1)),t("p",Q,e(a.data?.data[0]?.published_at),1)]),t("div",null,[s[17]||(s[17]=t("p",{class:"text-gray-500"},"Expires on",-1)),t("p",U,e(a.data?.data[0]?.expires_at),1)])])])]),t("div",W,[s[19]||(s[19]=t("h2",{class:"text-lg font-semibold mb-4"},"Documents",-1)),a.data.data[0].files.length>0?(l(),o("div",X,[(l(!0),o(g,null,p(a.data.data[0].files,(i,d)=>(l(),o("div",{key:d,class:"flex items-center justify-between p-3 border rounded hover:bg-gray-50"},[t("span",Y,e(i.name),1),t("a",{href:`${i.url}`,download:"",class:"text-blue-600 hover:underline flex items-center space-x-1"},[...s[18]||(s[18]=[t("i",{class:"uil uil-export"},null,-1),t("span",null,"Download",-1)])],8,tt)]))),128))])):(l(),o("div",st,"No documents available."))])]),t("div",at,[t("div",et,[s[23]||(s[23]=t("h2",{class:"text-2xl font-semibold mb-4"},"List of candidates",-1)),t("div",it,[t("button",{onClick:s[0]||(s[0]=i=>h(m.value,a.data?.data[0]?.candidat)),type:"button",class:"bg-primary p-2 px-3 rounded-lg text-white cursor-pointer hover:bg-primary-700 transition"},[...s[21]||(s[21]=[t("i",{class:"uil uil-export"},null,-1),t("span",null,"Export List",-1)])]),t("button",{disabled:r.loading,onClick:s[1]||(s[1]=i=>_(a.data?.data[0]?.candidat)),type:"button",class:"bg-gray-50 border border-gray-200 disabled:opacity-50 p-2 px-3 rounded-lg text-primary cursor-pointer hover:bg-gray-100 transition"},[s[22]||(s[22]=t("i",{class:"uil uil-export"},null,-1)),t("span",null,e(r.label),1)],8,dt)])]),t("div",nt,[f(j,{columns:m.value,rows:a.data?.data[0]?.candidat},{documents:x(({row:i})=>[t("div",ot,[(l(!0),o(g,null,p(i.documents,(d,ut)=>(l(),o("a",{href:`${d.path}`,download:d.name,target:"_blank",class:"text-blue-600 hover:underline"},e(d.name),9,lt))),256))])]),actions:x(({row:i})=>[t("a",{href:`/manager/candidat/${i.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," Voir ",8,rt)]),_:1},8,["columns","rows"])])])])]))}});export{pt as _};
