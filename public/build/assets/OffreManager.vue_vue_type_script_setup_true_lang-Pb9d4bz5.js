import{p as h,r as n,R as w,a as y,o as d,e as o,w as j,b as a,y as C,u as $,q as p,g as E,z as R}from"./app-CVrjPqym.js";import{u as T}from"./index-BYqRSgun.js";import{_ as B}from"./AddOffre.vue_vue_type_style_index_0_lang-BHjWBc1i.js";import{_ as D}from"./Table.vue_vue_type_script_setup_true_lang-DJ6pRsEq.js";import O from"./UpdateOffre-wAQ7I5oc.js";import{_ as M}from"./StatusOngoing.vue_vue_type_script_setup_true_lang-kFTJrqCt.js";import{_ as U}from"./StatusOffer.vue_vue_type_script_setup_true_lang-DaPheazZ.js";import V from"./Spinnercomponent-bWrRNDwo.js";import{r as I}from"./index.esm-BH6zfb8b.js";const N={class:"w-full min-h-screen flex flex-col"},P={class:"flex sticky left-0 right-0 justify-between mb-6 items-center w-full"},S={class:"flex gap-2 justify-between items-center"},q={class:"pb-10 overflow-x-auto"},A={class:"w-ful"},z={class:"flex items-center gap-2"},F=["onClick"],G={key:1},J=["href"],L=["href"],oe=h({__name:"OffreManager",props:{data:Array},setup(r){const b=r,m=[{key:"reference",label:"# Ref"},{key:"assign_by",label:"Recruiter"},{key:"type",label:"Type"},{key:"manager",label:"Manager"},{key:"center",label:"Recruitment Entity"},{key:"position_title",label:"Position"},{key:"country_duty_station",label:"Country duty station"},{key:"city_duty_station",label:"City duty station"},{key:"division",label:"Division"},{key:"grade",label:"Grade"},{key:"program",label:"Program"},{key:"status",label:"Status"},{key:"ongoing",label:"Ongoing status"},{key:"comment",label:"Comment tacking"},{key:"date_tracking",label:"Date tracking"},{key:"reason",label:"Reason"},{key:"reason_replacement",label:"Replacement fullname"},{key:"published_at",label:"Published on"},{key:"expires_at",label:"Expires on"},{key:"candidates_count",label:"Number of candidates"}],{exportToExcel:g}=T(),l=n(null),i=n(!1),f=n(null),u=n(b.search||null);let c=null;const _=()=>{l.value=!1},x=e=>{l.value={uuid:e.uuid??null,reference:e.reference??null,position_title:e.job?.position_title??"",country_duty_station:e.job.country_duty_station??"france",published_at:e.published_at??"",type:e.type??"public",expires_at:e.expires_at??"",status:e.status??"",assign_by:e.job.assign_by??"",reason:e.job.reason??"",manager:e.job.manager??"",center:e.job.center??"",grade:e.job.grade??"",program:e.job.program??"",division:e.job.division??"",city_duty_station:e.job.city_duty_station??"",reason_replacement:e.job.reason_replacement??""}};function k(){c&&clearTimeout(c),c=setTimeout(()=>{R.Inertia.get("/manager/offres",{search:u.value},{preserveState:!0,replace:!0})},300)}const v=async e=>{try{f.value=e?.uuid,i.value=!0;const t=await axios.get(`/manager/offre/detail/${e?.uuid}`);x(t.data.data),i.value=!1}catch(t){let s=t.response?.data?.message?t.response?.data?.message:"Erreur lors de l'envoi du formulaire ❌";t.response&&t.response.data&&t.response.data.errors&&(s=Object.values(t.response.data.errors).flat().join(`
`)),alert(s)}finally{console.log("Requête terminée")}};return w(()=>{I.reload()}),(e,t)=>(d(),y("div",null,[o("div",N,[o("div",P,[t[3]||(t[3]=o("h2",{class:"text-2xl font-semibold"},"Manage Job Offers",-1)),o("div",S,[j(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onInput:k,type:"search",placeholder:"search...",class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},null,544),[[C,u.value]]),o("button",{type:"button",onClick:t[1]||(t[1]=s=>$(g)(m,r.data.offer,"Liste_des_offres.xlsx")),class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},[...t[2]||(t[2]=[o("i",{class:"uil uil-export"},null,-1),o("span",null,"Export",-1)])]),a(B,{data:r.data},null,8,["data"])])]),o("div",q,[o("div",A,[a(D,{columns:m,rows:r.data?.offer},{ongoing:p(({row:s})=>[a(M,{status:s.ongoing},null,8,["status"])]),status:p(({row:s})=>[a(U,{status:s?.status},null,8,["status"])]),actions:p(({row:s})=>[o("div",z,[o("button",{onClick:H=>v(s),type:"button",class:"px-3 cursor-pointer py-1 text-sm border rounded-md hover:bg-gray-50"},[i.value&&f.value==s.uuid?(d(),E(V,{key:0})):(d(),y("span",G,"Edit"))],8,F),o("a",{href:`/manager/offres/${s.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," View ",8,J),o("a",{href:`/manager/offerTracker/${s.uuid}`,class:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50"}," Tracking ",8,L)])]),_:1},8,["rows"])]),a(O,{row:l.value,assign:r.data.assign,onClose:_},null,8,["row","assign"])])])]))}});export{oe as _};
