import{p as w,r as n,R as j,a as f,o as d,e as s,w as C,b as a,y as $,u as E,q as p,h as R}from"./app-DqfBxFxT.js";import{u as T}from"./index-D7GDvnlZ.js";import{_ as B}from"./AddOffre.vue_vue_type_style_index_0_lang-KYYSvpYm.js";import{_ as D}from"./Table.vue_vue_type_script_setup_true_lang-XVBV7Tps.js";import M from"./UpdateOffre-DUSvNGk8.js";import{_ as S}from"./StatusOngoing.vue_vue_type_script_setup_true_lang-CrPFPZub.js";import{_ as I}from"./StatusOffer.vue_vue_type_script_setup_true_lang-DC1ErWGS.js";import O from"./Spinnercomponent-DjBBJ4BC.js";import{d as b}from"./index-BHT76EsK.js";const V={class:"w-full min-h-screen flex flex-col"},N={class:"flex justify-between mb-6 items-center w-full"},P={class:"flex gap-2 justify-between items-center"},U={class:"pb-10 overflow-x-auto"},q={class:"w-ful"},A={class:"flex items-center gap-2"},F=["onClick"],G={key:1},J=["href"],L=["href"],re=w({__name:"OffreManager",props:{data:Array},setup(o){const g=o,m=[{key:"reference",label:"# Ref"},{key:"assign_by",label:"Recruiter"},{key:"type",label:"Type"},{key:"manager",label:"Manager"},{key:"center",label:"Recruitment Entity"},{key:"position_title",label:"Position"},{key:"country_duty_station",label:"Country duty station"},{key:"city_duty_station",label:"City duty station"},{key:"division",label:"Division"},{key:"grade",label:"Grade"},{key:"program",label:"Program"},{key:"status",label:"Status"},{key:"ongoing",label:"Ongoing status"},{key:"comment",label:"Comment tacking"},{key:"date_tracking",label:"Date tracking"},{key:"reason",label:"Reason"},{key:"reason_replacement",label:"Replacement fullname"},{key:"published_at",label:"Published on"},{key:"expires_at",label:"Expires on"},{key:"candidates_count",label:"Number of candidates"}],{exportToExcel:_}=T(),l=n(null),i=n(!1),y=n(null),u=n(g.search||null);let c=null;const x=()=>{l.value=!1},v=e=>{l.value={uuid:e.uuid??null,reference:e.reference??null,position_title:e.job?.position_title??"",country_duty_station:e.job.country_duty_station??"france",published_at:e.published_at??"",type:e.type??"public",expires_at:e.expires_at??"",status:e.status??"",assign_by:e.job.assign_by??"",reason:e.job.reason??"",manager:e.job.manager??"",center:e.job.center??"",grade:e.job.grade??"",program:e.job.program??"",division:e.job.division??"",city_duty_station:e.job.city_duty_station??"",reason_replacement:e.job.reason_replacement??""}};function k(){c&&clearTimeout(c),c=setTimeout(()=>{b.Inertia.get("/manager/offres",{search:u.value},{preserveState:!0,replace:!0})},300)}const h=async e=>{try{y.value=e?.uuid,i.value=!0;const t=await axios.get(`/manager/offre/detail/${e?.uuid}`);v(t.data.data),i.value=!1}catch(t){let r=t.response?.data?.message?t.response?.data?.message:"Erreur lors de l'envoi du formulaire ❌";t.response&&t.response.data&&t.response.data.errors&&(r=Object.values(t.response.data.errors).flat().join(`
`)),alert(r)}finally{console.log("Requête terminée")}};return j(()=>{b.Inertia.reload({only:["data"],preserveScroll:!0,preserveState:!0})}),(e,t)=>(d(),f("div",null,[s("div",V,[s("div",N,[t[3]||(t[3]=s("h2",{class:"text-2xl font-semibold"},"Manage Job ",-1)),s("div",P,[C(s("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),onInput:k,type:"search",placeholder:"search...",class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},null,544),[[$,u.value]]),s("button",{type:"button",onClick:t[1]||(t[1]=r=>E(_)(m,o.data.offer,"Liste_des_offres.xlsx")),class:"border-[0.1rem] border-gray-200 p-2 px-3 rounded-lg text-primary cursor-pointer"},[...t[2]||(t[2]=[s("i",{class:"uil uil-export"},null,-1),s("span",null,"Export",-1)])]),a(B,{data:o.data},null,8,["data"])])]),s("div",U,[s("div",q,[a(D,{columns:m,rows:o.data?.offer},{ongoing:p(({row:r})=>[a(S,{status:r.ongoing},null,8,["status"])]),status:p(({row:r})=>[a(I,{status:r?.status},null,8,["status"])]),actions:p(({row:r})=>[s("div",A,[s("button",{onClick:z=>h(r),type:"button",class:"border-[0.1rem] border-gray-200 px-3 rounded-lg text-primary py-1 text-[12px] cursor-pointer pyrder hover:bg-gray-50"},[i.value&&y.value==r.uuid?(d(),R(O,{key:0})):(d(),f("span",G,"Edit"))],8,F),s("a",{href:`/manager/offres/${r.uuid}`,class:"border-[0.1rem] border-gray-200 px-3 rounded-lg text-primary py-1 text-[12px] hover:bg-gray-50"}," View ",8,J),s("a",{href:`/manager/offerTracker/${r.uuid}`,class:"border-[0.1rem] border-gray-200 px-3 rounded-lg text-primary py-1 text-[12px] hover:bg-gray-50"}," Tracking ",8,L)])]),_:1},8,["rows"])]),a(M,{row:l.value,assign:o.data.assign,onClose:x},null,8,["row","assign"])])])]))}});export{re as _};
